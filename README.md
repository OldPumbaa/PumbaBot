# <img src="static/favicon.png" alt="logo" style="width: 50px; margin-right: 20px;"> PumbaBot 
PumbaBot — это универсальный бот технической поддержки, интегрированный с Telegram и веб-приложением. Он предлагает полный контроль над обращениями пользователей и множество других возможностей. Проект может быть развернут на собственном сервере и использован как в личных, так и в open-source проектах.

# Структура
Система состоит из двух частей - Telegram бота и веб-приложения.

## Возможности бота
* Регистрация новых пользователей;
* Фиксация обращений и их сбор в ветки (тикеты);
* Сбор обратной связи после закрытия тикета;
* Пересылка уведомлений в рабочий чат и в отдельный топик в нем;
* Уведомления в ЛС о назначенных тикетах;
* Автоматический ответ, в зависимости от условий.

## Возможности веб-приложения
* Просмотр тикетов и ответ на них;
* Управление пользователями (мут, бан, удаление, назначение в сотрудники);
* Персональные сообщения в ЛС;
* Настройка стандартных сообщений от бота для разных ситуаций (выходные, праздники и т.д.);
* Поиск по прошлым тикетам;
* Просмотр истории внутри диалога с пользователем;
* Внутренний чат для общения сотрудников.

# Требования
* Python 3.11+
* Токен бота Телеграм (получите у @BotFather)
* Сервер с доступом к интернету для веб-приложения

# Установка
1. Клонируйте репозиторий:
```bash
git clone https://github.com/OldPumbaa/PumbaBot.git
cd PumbaBot
```
2. Создайте виртуальную среду:
```bash
python -m venv venv
source venv/bin/activate  # Linux/Mac
venv\Scripts\activate     # Windows
```
3. Установите зависимости:
```bash
pip install -r requirements.txt
```
4. Настройте переменные окружения:
* Скопируйте env.example в .env:
```bash
cp .env.example .env
```
* Отредактируйте .env, добавив:
    * BOT_TOKEN: Токен вашего Telegram бота.
    * ADMIN_TELEGRAM_ID: Telegram ID главного администратора.
    * NOTIFICATION_CHAT_ID: ID чата для уведомлений
    * NOTIFICATION_TOPIC_ID: ID топика для уведомлений.
    * BASE_URL: URL вашего веб-приложения (например, https://your-site.com).
5. Инициализируйте базу данных: База данных SQLite (support.db) создается автоматически при первом запуске.

# Запуск
1. Запустите приложение:
```bash
python main.py
```
Это запустит бота и сервер на http://0.0.0.0:8080.
2. Откройте веб-приложение и авторизуйтесь.
